---
name: codemap-update
description: 增量更新代码图谱，只重新解析变更的文件
---

# CodeMap Update — 增量更新图谱

基于文件哈希比较，只重新解析变更的文件，将更新合并到现有图谱。

## 执行步骤

### 1. 执行增量更新

```bash
"${CLAUDE_PLUGIN_ROOT}/bin/codegraph" update
```

CLI 会自动：
- 对比现有文件哈希与磁盘上的当前哈希
- 只重新 AST 解析新增和修改的文件
- 从图谱中移除已删除的文件
- 重新计算模块依赖关系
- 重新生成受影响的切片

### 2. 展示变更摘要

向用户报告：
- 新增文件数 (+N)
- 修改文件数 (~N)
- 删除文件数 (-N)
- 更新耗时

### 3. 刷新已加载的上下文

如果当前会话已经通过 `/codemap:codemap-load` 加载了某些模块的图谱，且这些模块受到更新影响，重新执行加载刷新上下文。
